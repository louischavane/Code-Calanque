YUI.add("hermes-template-account-menu",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'	<div class="c-account-menu">\n		<div class="c-account-buddyicon">\n			<a href="/account">\n				<div class="avatar person tiny" style="background-image: url('+e.escapeExpression(e.lambda((s=(s=t!=null?t.user:t)!=null?s.buddyicon:s)!=null?s["default"]:s,t))+')"></div>\n			</a>\n\n			'+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.user:t)!=null?s.unreadMessages:s,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		</div>\n	</div>\n"},2:function(e,t,n,r,i){var s;return'<span class="c-account-unreadcount">'+e.escapeExpression(e.lambda((s=t!=null?t.user:t)!=null?s.unreadMessages:s,t))+"</span>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.user:t)!=null?s.signedIn:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/account-menu",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-greetings",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return"<h4>Hola, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SPANISH"},data:i}))+"</p>\n<h4>Guten Tag, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_GERMAN"},data:i}))+"</p>\n<h4>Servus, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_GERMAN"},data:i}))+"</p>\n<h4>G&rsquo;day, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_AUSTRALIAN"},data:i}))+"</p>\n<h4>Hoi, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_DUTCH"},data:i}))+"</p>\n<h4>Yo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:i}))+"</p>\n<h4>Hi, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:i}))+"</p>\n<h4>Oi, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:i}))+"</p>\n<h4>Hala, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ARABIC"},data:i}))+"</p>\n<h4>Ahoy, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:i}))+"</p>\n<h4>Hello, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:i}))+"</p>\n<h4>Bonjour, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_FRENCH"},data:i}))+"</p>\n<h4>Salut, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_FRENCH"},data:i}))+"</p>\n<h4>Salaam, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ARABIC"},data:i}))+"</p>\n<h4>Ciao, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ITALIAN"},data:i}))+"</p>\n<h4>Hola, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SPANISH"},data:i}))+"</p>\n<h4>Hej, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SWEDISH"},data:i}))+"</p>\n<h4>Aloha, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HAWAIIAN"},data:i}))+"</p>\n<h4>Kumusta, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_TAGALOG"},data:i}))+"</p>\n<h4>Shalom, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HEBREW"},data:i}))+"</p>\n<h4>'Allo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:i}))+"</p>\n<h4>Namaste, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HINDI"},data:i}))+"</p>\n<h4>Ni hao, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_MANDARIN"},data:i}))+"</p>\n<h4>Ol&aacute;, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_PORTUGUESE"},data:i}))+"</p>\n<h4>P&euml;rsh&euml;ndetje, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ALBANIAN"},data:i}))+"</p>\n<h4>Tere, "+
u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ESTONIAN"},data:i}))+"</p>\n<h4>Yasou, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_GREEK"},data:i}))+"</p>\n<h4>Szia, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HUNGARIAN"},data:i}))+"</p>\n<h4>Mbote, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_LINGALA"},data:i}))+"</p>\n<h4>Jambo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SWAHILI"},data:i}))+"</p>\n<h4>Moyo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_TSHILUBA"},data:i}))+"</p>\n<h4>Merhaba, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_TURKISH"},data:i}))+"</p>\n<h4>Mingalaba, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BURMESE"},data:i}))+"</p>\n<h4>G&#243;&#240;an daginn, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ICELANDIC"},data:i}))+"</p>\n<h4>Sawubona, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ZULU"},data:i}))+"</p>\n<h4>Bangawoyo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_KOREAN"},data:i}))+"</p>\n<h4>F&aacute;ilte, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_IRISH"},data:i}))+"</p>\n<h4>Labdien, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_LATVIAN"},data:i}))+"</p>\n<h4>Kaixo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BASQUE"},data:i}))+"</p>\n<h4>Nomoshkar, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BENGALI"},data:i}))+"</p>\n<h4>Zdrasti, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BULGARIAN"},data:i}))+"</p>\n<h4>Bok, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_CROATIAN"},data:i}))+"</p>\n<h4>Dobr&yacute; den, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_CZECH"},data:i}))+"</p>\n<h4>Hej, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_DANISH"},data:i}))+"</p>\n<h4>Hyv&auml;&auml; p&auml;iv&auml;&auml;, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_FINNISH"},data:i}))+"</p>\n<h4>Mike, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HOPI"},data:i}))+"</p>\n<h4>Szia, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HUNGARIAN"},data:i}))+"</p>\n<h4>Halo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_INDONESIAN"},data:i}))+"</p>\n<h4>Namaskara, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_KANNADA"},data:i}))+"</p>\n<h4>Chon\u00ee, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_KURDISH"},data:i}))+"</p>\n<h4>Labas, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||
f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_LITHUANIAN"},data:i}))+"</p>\n<h4>Selamat datang, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_MALAYSIAN"},data:i}))+"</p>\n<h4>Hei, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_NORWEGIAN"},data:i}))+"</p>\n<h4>Witaj, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_POLISH"},data:i}))+"</p>\n<h4>Bun&#x103; Ziua, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ROMANIAN"},data:i}))+"</p>\n<h4>Privet, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_RUSSIAN"},data:i}))+"</p>\n<h4>Zdravo, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SERBIAN"},data:i}))+"</p>\n<h4>Ahoj, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SLOVAKIAN"},data:i}))+"</p>\n<h4>Pryvit, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_UKRAINIAN"},data:i}))+"</p>\n<h4>Xin ch&agrave;o, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_VIETNAMESE"},data:i}))+"</p>\n<h4>Sawubona, "+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.username:s,t))+"!</h4><p>"+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ZULU"},data:i}))+"</p> \n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u;return s=(o=(o=n.randomLine||(t!=null?t.randomLine:t))!=null?o:n.helperMissing,u={name:"randomLine",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i},typeof o=="function"?o.call(t!=null?t:{},u):o),n.randomLine||(s=n.blockHelperMissing.call(t,s,u)),s!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/greetings",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-account-menu-dialog-styleguide",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'				<span class="photo-count secondary">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{used:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.storageUsedFormatted:s,intlName:"account-menu.SPACE_USED_UNLIMITED"},data:i}))+"</span>\n"},3:function(e,t,n,r,i){var s,o=t!=null?t:{},u=e.escapeExpression;return((s=n["if"].call(o,(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.photoCount:s,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(12,i,0),data:i}))!=null?s:"")+'			<span class="storage-count secondary">'+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(o,{name:"intlHTMLMessage",hash:{total:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.storageTotalFormatted:s,percentage:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.storageUsedPercentage:s,intlName:"account-menu.SPACE_USED_STYLEGUIDE"},data:i}))+'</span></div>\n			<div class="bar" style="box-shadow: 0 0 0 1px #898989, inset '+u(e.lambda((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.barWidth:s,t))+'px 0 #008ddf;">\n'},4:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.pluralPhotos:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:""},5:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.oneK:s,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))!=null?s:""},6:function(e,t,n,r,i){var s;return'					<span class="photo-count secondary">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{num:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.photoCount:s,intlName:"account-menu.PHOTO_COUNT_1K"},data:i}))+"</span>\n"},8:function(e,t,n,r,i){var s;return'					<span class="photo-count secondary">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{num:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.photoCount:s,intlName:"account-menu.PHOTO_COUNT_MANY"},data:i}))+"</span>\n"},10:function(e,t,n,r,i){return'				<span class="photo-count secondary">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"account-menu.PHOTO_COUNT_ONE"},data:i}))+"</span>\n"},12:function(e,t,n,r,i){return'				<span class="photo-count secondary">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"account-menu.PHOTO_COUNT_NONE"},data:i}))+"</span>\n"},14:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.canBuyPro:s,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.program(17,i,0),data:i}))!=null?s:""},15:function(e,t,n,r,i){return'				<div class="upgrade">\n					<a href="/account/upgrade/pro" data-action="follow" class="small butt">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"account-menu.GOPRO"},data:i}))+"</a>\n				</div>\n"},17:function(e,t,n,r,i){var s;return"\n"+((s=(n.isNotFlipped||t&&t.isNotFlipped||n.helperMissing).call(t!=null?t:{},"enable-new-pro",{name:"isNotFlipped",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},18:function(e,t,n,r,i){return'\n					<div class="upgrade">\n						<a href="/account/upgrade/adfree" data-action="follow" class="small butt">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"account-menu.GOADFREE"},data:i}))+"</a>\n					</div>\n\n"},20:function(e,t,n,r,i){var s;return"<span >&nbsp;("+e.escapeExpression(e.lambda((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.unreadMessages:s,t))+")</span>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'<div class="fluid">\n	<div class="top-half dark" style="background-image: url('+u(o((s=(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.coverPhotoUrls:s)!=null?s.t:s,t))+')">\n		<a href="/photos/me"><span class="avatar person medium" style="background-image: url('+u(o((s=(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.buddyicon:s)!=null?s["default"]:s,t))+')"></span></a>\n'+((s=e.invokePartial(r.greetings,t,{name:"greetings",data:i,indent:"		",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+'	</div>\n	<div class="bottom-half light">\n		<div class="labels">\n'+((s=n["if"].call(a,(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.isPro:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"		</div>\n\n"+((s=n.unless.call(a,(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.isNoAds:s,{name:"unless",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n\n		<div class="links secondary">\n			<span class="link-wrapper">\n				<ul>\n					<li><a href="/mail"  data-action="follow">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.FLICKRMAIL"},data:i}))+((s=n["if"].call(a,(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.unreadMessages:s,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+'</a></li>\n					<li><a href="https://help.yahoo.com/flickr"  data-action="follow">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.HELP"},data:i}))+'</a></li>\n					<li><a href="/account"  data-action="follow">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.SETTINGS"},data:i}))+'</a></li>\n					<li><a href="/logout.gne?csrf='+u(o((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.csrf:
s,t))+'"  data-action="follow">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.SIGN_OUT"},data:i}))+"</a></li>\n				</ul>\n			</span>\n		</div>\n	</div>\n</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["greetings"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/account-menu-dialog-styleguide",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-greetings"]});
YUI.add("hermes-template-account-menu-card",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.isPro:s,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))!=null?s:""},2:function(e,t,n,r,i){var s;return'					<span class="storage-count tertiary">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{used:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.storageUsedFormatted:s,intlName:"account-menu.SPACE_USED_UNLIMITED"},data:i}))+"</span>\n"},4:function(e,t,n,r,i){var s,o=e.escapeExpression;return'					<div class="bar" style="box-shadow: 0 0 0 1px transparent, inset '+o(e.lambda((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.barWidth:s,t))+'px 0 #008ddf;">\n						<span class="storage-count tertiary">'+o((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{total:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.storageTotalFormatted:s,percentage:(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.storageUsedPercentage:s,intlName:"account-menu.SPACE_USED"},data:i}))+"</span>\n					</div>\n"},6:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.hasUnlimitedStorage:s,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))!=null?s:""},8:function(e,t,n,r,i){return'				<div class="upgrade" style="display: none;">\n					<a href="/account/upgrade/pro" data-action="follow" class="small butt"><div class="balls"></div></a>\n				</div>\n'},10:function(e,t,n,r,i){var s;return"\n"+((s=(n.isNotFlipped||t&&t.isNotFlipped||n.helperMissing).call(t!=null?t:{},"enable-new-pro",{name:"isNotFlipped",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},11:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.canBuyPro:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.program(14,i,0),data:i}))!=null?s:""},12:function(e,t,n,r,i){return'					<div class="upgrade">\n						<a href="/account/upgrade/pro" data-action="follow" class="small butt">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"account-menu.GOPRO"},data:i}))+"</a>\n					</div>\n"},14:function(e,t,n,r,i){var s;return"\n"+((s=(n.isNotFlipped||t&&t.isNotFlipped||n.helperMissing).call(t!=null?t:{},"enable-new-pro",{name:"isNotFlipped",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},15:function(e,t,n,r,i){return'\n						<div class="upgrade">\n							<a href="/account/upgrade/adfree" data-action="follow" class="small butt">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"account-menu.GOADFREE"},data:i}))+"</a>\n						</div>\n\n"},17:function(e,t,n,r,i){var s;return"<span >&nbsp;("+e.escapeExpression(e.lambda((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.unreadMessages:s,t))+")</span>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'<div class="fluid account-menu-card">\n	<div class="title">\n'+((s=e.invokePartial(r.greetings,t,{name:"greetings",data:i,indent:"		",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+'	</div>\n	<div class="info">\n		<div class="labels">\n\n'+((s=(n.isNotFlipped||t&&t.isNotFlipped||u).call(o,"enable-new-pro",{name:"isNotFlipped",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.isFlipped||t&&t.isFlipped||u).call(o,"enable-new-pro",{name:"isFlipped",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		</div>\n\n"+((s=(n.isFlipped||t&&t.isFlipped||u).call(o,"enable-new-pro",{name:"isFlipped",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n.unless.call(o,(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.isNoAds:s,{name:"unless",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n\n		<div class="links secondary">\n			<span class="link-wrapper">\n				<ul>\n					<li><a href="/mail"  data-action="follow">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FLICKRMAIL"},data:i}))+((s=n["if"].call(o,(s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.unreadMessages:s,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+'</a></li>\n					<li><a href="//help.yahoo.com/kb/index?page=product&locale='+a(f((s=t!=null?t.attrs:t)!=null?s.helpLocaleKey:s,t))+'&y=PROD_FLICKR_DESK&actp=productlink"  data-action="follow">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:i}))+'</a></li>\n					<li><a href="/account"  data-action="follow">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.SETTINGS"},data:i}))+'</a></li>\n					<li><a href="/logout.gne?csrf='+a(f((s=(s=t!=null?t.attrs:t)!=null?s.user:s)!=null?s.csrf:s,t))+'"  data-action="follow">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.SIGN_OUT"},data:i}))+"</a></li>\n				</ul>\n			</span>\n		</div>\n	</div>\n</div>\n"},usePartial:!0,useData:!0}),r={};e.Array.each(["greetings"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/account-menu-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-greetings"]});
YUI.add("hermes-template-account-menu-card-get-pro-button",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'	<div class="upgrade">\n		<a href="/account/upgrade/pro" data-action="follow" class="small butt">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"account-menu.GETPRO"},data:i}))+"</a>\n	</div>\n"},3:function(e,t,n,r,i){return'	<div class="upgrade">\n		<a href="/account/upgrade/pro" data-action="follow" class="small butt">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"account-menu.RESUBSCRIBE_TO_PRO"},data:i}))+"</a>\n	</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.canPurchase:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.canResubscribe:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/account-menu-card-get-pro-button",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("products-api-helper",function(e,t){function o(e,t){var n,r,i,s,o,u,a,f;return n=t.couponRegistry,r=t.discountRegistry,o=e.discount,e.id=o.couponCode,f=o.discountId,a={costDiscount:o.costDiscount,couponId:e.id,discountType:o.discountType,discountValue:o.discountValue,minPurchaseValue:o.minPurchaseValue,productEntity:o.productEntity},r.exists(f)?(r.setValues(f,a),u=r.proxy(f)):(a.id=f,u=r.add(a)),i={code:o.couponCode,subscriptionId:e.subscriptionId,discounts:[u],isValidCoupon:e.stat==="ok"},n.exists(e.id)?(n.setValues(e.id,i),s=n.proxy(e.id)):(i.id=e.id,s=n.add(i)),s}function u(e,t,n,r){var i,s,o,u,a,f,l,c,h,p;if(t&&!t.isValidCoupon)throw h=new Error(t.invalidReason),h.name="CouponInvalidError",h;return i=r.couponRegistry,s=r.discountRegistry,a=[],e.id=e.couponId,f=e.discounts.discount[0],p=f.discountId,c={costDiscount:f.costDiscount,couponId:e.id,discountType:f.discountType,discountValue:f.discountValue,minPurchaseValue:f.minPurchaseValue,productEntity:f.productEntity},s.exists(p)?(s.setValues(p,c),l=s.proxy(p)):(c.id=p,l=s.add(c)),a.push(l),o={code:e.code,orderId:n,discounts:a},t&&(o.isSingleUse=t.isSingleUse,o.isUserSpecific=t.isUserSpecific,o.isValidCoupon=t.isValidCoupon),i.exists(e.id)?(i.setValues(e.id,o),u=i.proxy(e.id)):(o.id=e.id,u=i.add(o)),u}function a(e,t,n){var r,i,s;return r=n.orderItemRegistry,i=n.itemPriceRegistry,e instanceof Array&&(e=e[0]),e=e.map(function(e){var n=e.renderedProductId,o,u,a,f,l={};return l.sourceProductId=e.sourceProductId,l.productType=e.productType,l.productTitle=e.productTitle,l.quantity=e.quantity,l.cost=e.costProductUnit,l.orderId=t,e.productPrice&&(a=e.productPrice,s={priceBase:a.priceBase,countPagesBase:a.countPagesBase,countPagesExtra:a.countPagesExtra,pricePerPage:a.pricePerPage,pricePagesExtra:a.pricePagesExtra,priceTotal:a.priceTotal},a.shipping&&(f=a.shipping,f.standardShipping&&(s.standardShippingBase=f.standardShipping.priceShippingBase,s.standardShippingExtra=f.standardShipping.priceShippingExtra),f.expressShipping&&(s.expressShippingBase=f.expressShipping.priceShippingBase,s.expressShippingExtra=f.expressShipping.priceShippingExtra)),i.exists(n)?(o=i.proxy(n),o.setValues(s)):(s.id=n,o=i.add(s))),e.product&&e.product.skuId&&(l.skuId=e.product.skuId),l.price=o,r.exists(n)?(u=r.proxy(n),u.setValues(l),u):(l.id=n,r.add(l))}),e}function f(e,t){var n,r,i,s,o;o={},n=t.orderRegistry,e.orderId&&(e.id=e.orderId);if(e.couponMetadata&&!e.couponMetadata.isValidCoupon)throw s=new Error(e.couponMetadata.invalidReason),s.name="CouponInvalidError",s;return e.coupons&&(o.coupon=this.parseCoupons(e.coupons.coupon,e.couponMetadata,e.orderId,t),i=o.coupon.getValue("discounts").getList()[0],i&&i.getValue("discountType")==="percent"&&parseInt(i.getValue("discountValue"),10)===100?o.isFreeOrder=1:o.isFreeOrder=0),e.item&&(o.items=this.parseItems(e.item,e.id,t)),o.orderId=e.orderId,o.statusOrder=e.statusOrder,o.statusPrint=e.statusPrint,o.statusPayment=e.statusPayment,o.paymentMethodId=e.paymentMethodId,o.bookPreviewPdf=e.bookPreviewPdf,o.userId=e.userId,o.trackingNum=e.trackingNum,o.trackingUrl=e.trackingUrl,o.costTotal=parseFloat(e.costTotal)||0,o.costProducts=parseFloat(e.costProducts)||0,o.costShipping=e.costShipping||0,o.costDiscount=e.costDiscount||0,o.costTax=e.costTax,o.isCouponApplied=e.isCouponApplied,o.shippingType=e.shippingType||e.shipMethod||"standard_shipping",o.dateCreate=e.dateCreate,e.countryCode&&(o.countryCode=e.countryCode),n.exists(e.orderId)?(r=n.proxy(e.orderId),r.setValues(o),r):(o.id=e.orderId,n.add(o))}function l(t,n){var r=t,i=n.pageModelRegistry,s=n.bookModelRegistry,o=n.pagePhotoModelRegistry,u=n.photoModelRegistry,a=n.personRegistry,f=n.photoEngagementRegistry,l=n.photoStatsRegistry,c,h=[];if(r)return t={id:r.id,owner:r.owner,title:r.title,coverPhotoId:r.coverPageId,totalPhotos:0,price:r.price,created:r.dateCreate},r.page&&e.Array(r.page).forEach(function(n){var r=[],s;n.photo&&e.Array(n.photo).forEach(function(i){var s,h,p;e.Lang.isNumber(parseInt(i.id,10))&&(n.id=String(n.id).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),p=n.id+"_"+i.position,s={id:p,bookId:t.id,position:i.position,cropX:i.cropX/100,cropY:i.cropY/100,cropW:i.cropW/100,cropH:i.cropH/100,invalidForPrintReason:i.invalidForPrintReason,isInvalidForPrint:i.isInvalidForPrint},h=e.APIHelper.response.parsePhotos({photos:[i],personModelRegistry:a,photoModelRegistry:u,photoEngagementModelRegistry:f,photoStatsModelRegistry:l})[0],s.photo=h,c=s.id,o.exists(c)?(delete s.id,o.setValues(c,s)):o.add(s),r.push(o.proxy(c)))}),s=e.APIHelper.response.parsePage(n),s.bookId=t.id,s.pagePhotos=r,c=s.id,i.exists(c)?(delete s.id,i.setValues(c,s),n=i.proxy(c)):n=i.add(s),h.push(c),t.totalPhotos=t.totalPhotos+r.length,t.coverPage||(t.coverPage=n)}),t.pageOrder=h,s.exists(t.id)?s.setValues(t.id,{title:t.title,pageOrder:t.pageOrder,totalPhotos:t.totalPhotos,coverPage:t.coverPage}):s.add(t),t}var n,r,i,s;n={1:"Flickr Pro",2:"Flickr Pro",3:"Flickr Pro",4:"Ad Free",6:"Ad Free",7:"Flickr Pro",8:"Flickr Pro"},r={1:"3 months",2:"1 year",3:"2 years",4:"1 year",6:"1 month",7:"1 month",8:"1 year"},i={1:"Created",2:"Pending",3:"Submitted",4:"Accepted",5:"Packaged",6:"Shipped",7:"Voided",99:"Cancelled",101:"Submitted"},s={initiated:1,active:2,closed:3,canceled:4,failed:5,refunded:6,pending:7,subscription_canceled:8,subscription_charged_successfully:9,subscription_charged_unsuccessfully:10,subscription_expired:11,subscription_went_past_due:12,change_initiated:13,closed_pending:14},e.ProductsAPIHelper={parseOrder:f,parseCoupons:u,parseItems:a,parseBook:l,parseSubscriptionCoupon:o}},"@VERSION@",{requires:[]});
YUI.add("flickr-products-discounts-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.Promise.resolve()},create:function(t){return e.Promise.resolve()},"delete":function(t){return e.Promise.resolve()}},attributes:{costDiscount:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},couponId:{},discountType:{},discountValue:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},minPurchaseValue:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},productEntity:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("flickr-products-order-items-setQuantity-updater",function(e,t){"use strict";function n(e,t,n){}function r(r,i){return i.callAPI("flickr.products.orders.setItemQuantity",r).then(function(e){n(e,r,i)},e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-products-order-items-setQuantity-updater"]={run:r}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("products-order-item-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{update:function(t,n){var r;return"quantity"in n?(r={order_id:this.getValue(t,"orderId"),product_id:t,quantity:n.quantity.newVal},e.ModelUpdaters["flickr-products-order-items-setQuantity-updater"].run(r,this.appContext)):e.Promise.resolve()}},attributes:{orderId:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},sourceProductId:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},productType:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},productTitle:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},quantity:{validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},cost:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},skuId:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},price:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-products-order-items-setQuantity-updater"]});
YUI.add("products-order-item-price-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{orderItemId:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},priceBase:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},countPagesBase:{getter:function(e){return parseInt(e,10)},validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},countPagesExtra:{getter:function(e){return parseInt(e,10)},validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},pricePerPage:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},pricePagesExtra:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},priceTotal:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},standardShippingBase:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},standardShippingExtra:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},expressShippingBase:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},expressShippingExtra:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-products-order-items-setQuantity-updater"]});
YUI.add("flickr-products-orders-removeCoupon-deletor",function(e,t){"use strict";function n(e){var t={};return t.order_id=e.orderId,t.coupon_code=e.couponCode,t}function r(t){var n,r,i,s,o,u,a,f;return f=t.response,n=t.orderRegistry,r=t.couponRegistry,i=t.discountRegistry,s=t.itemRegistry,o=t.itemPriceRegistry,a={orderRegistry:n,orderItemRegistry:s,itemPriceRegistry:o,couponRegistry:r,discountRegistry:i},n.remove(f.order.orderId),u=e.ProductsAPIHelper.parseOrder(f.order,a),u}function i(n,r){var i=this;return(new e.FlickrPromise({response:r.callAPI("flickr.products.orders.removeCoupon",i._processParams(n)),orderRegistry:r.getModelRegistry("flickr-products-orders-models"),couponRegistry:r.getModelRegistry("flickr-products-coupons-models"),discountRegistry:r.getModelRegistry("flickr-products-discounts-models"),itemRegistry:r.getModelRegistry("products-order-item-models"),itemPriceRegistry:r.getModelRegistry("products-order-item-price-models")})).then(i._processResponse,e.FetcherErrorLogger(t))}e.namespace("ModelDeletors")["flickr-products-orders-removeCoupon"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","products-api-helper"],optional:["flickr-products-orders-models","flickr-products-coupons-models","flickr-products-discounts-models","products-order-item-models","products-order-item-price-models"]});
YUI.add("flickr-products-coupons-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.Promise.resolve()},create:function(t){return e.ModelCreators["flickr-products-orders-applyCoupon"].run(t,this.appContext)},"delete":function(t,n){return n={couponCode:this.getValue(t,"code"),orderId:this.getValue(t,"orderId")},e.ModelDeletors["flickr-products-orders-removeCoupon"].run(n,this.appContext)}},attributes:{code:{},orderId:{},discounts:{isListProxy:!0},isValidCoupon:{},isUserSpecific:{},isSingleUse:{},invalidReason:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-products-orders-applyCoupon-creator","flickr-products-orders-removeCoupon-deletor"]});
YUI.add("flickr-products-orders-create-creator",function(e,t){"use strict";function n(e){var t={};return e=e||{},t.items=e.bookId||e.items,t.cacheBust=Date.now(),t}function r(t,n,r){var i,s,o,u,a,f,l,c;return c=t.response,i=t.orderRegistry,s=t.couponRegistry,o=t.discountRegistry,u=t.itemRegistry,a=t.itemPriceRegistry,l={orderRegistry:i,orderItemRegistry:u,itemPriceRegistry:a,couponRegistry:s,discountRegistry:o},f=e.ProductsAPIHelper.parseOrder(c.order,l),f}function i(n,r){var i=this;return(new e.FlickrPromise({response:r.callAPI("flickr.products.orders.create",this._processParams(n)),orderRegistry:r.getModelRegistry("flickr-products-orders-models"),couponRegistry:r.getModelRegistry("flickr-products-coupons-models"),discountRegistry:r.getModelRegistry("flickr-products-discounts-models"),itemRegistry:r.getModelRegistry("products-order-item-models"),itemPriceRegistry:r.getModelRegistry("products-order-item-price-models")})).then(function(e){return i._processResponse(e,n,r)},e.FetcherErrorLogger(t))}e.namespace("ModelCreators")["flickr-products-orders-create"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","flickr-products-orders-models","flickr-products-coupons-models","flickr-products-discounts-models","products-order-item-models","products-order-item-price-models"],optional:[]});
YUI.add("flickr-products-subscriptions-orders-create-creator",function(e,t){"use strict";function i(e){var t={};return e=e||{},t.plan_type=e.planType,t.cache_bust=Date.now(),t}function s(e,t){var i=e[0].subscription,s=e[1],o;return i?s.exists(i.subscriptionId)?o=s.get(i.orderId):o=s.add({id:i.subscriptionId||null,productName:i.planData.productClassId&&t.planType?n[t.planType]+" "+r[t.planType]:i.planData.name,subscriptionDuration:i.planData.length||0,orderId:i.subscriptionId||null,costTotal:parseFloat(i.planData.price)||0,costProducts:parseFloat(i.planData.costProducts)||0,costShipping:parseFloat(i.planData.costShipping)||0,costTax:i.planData.costTax||0,statusPrint:i.planData.statusPrint||null,statusPayment:i.planData.statusPayment||null,orderType:"subscription"}):console.warn("flickr-products-subscriptions-orders-create-creator: No API response?"),o}function o(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.subscriptions.braintree.initiateSubscription",this._processParams(n)),r.getModelRegistry("flickr-products-orders-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}var n={1:"Flickr Pro",2:"Flickr Pro",3:"Flickr Pro",4:"Ad Free",6:"Ad Free",7:"Flickr Pro",8:"Flickr Pro"},r={1:"3 months",2:"1 year",3:"2 years",4:"1 year",6:"1 month",7:"1 month",8:"1 year"};e.namespace("ModelCreators")["flickr-products-subscriptions-orders-create"]={run:o,_processParams:i,_processResponse:s}},"@VERSION@",{requires:["flickr-promise","flickr-products-orders-models"],optional:[]});
YUI.add("flickr-products-books-editPage-updater",function(e,t){"use strict";function n(n,r){var i={};return i.page_id=n.pageId,i.book_id=n.bookId,n.templateId&&(i.template_id=n.templateId),n.backgroundColor&&(i.background_color=n.backgroundColor),r.callAPI("flickr.products.books.editPage",i).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-products-books-editPage"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-favorites-add-updater",function(e,t){"use strict";function n(n,r){var i={};return i.photo_id=n.photoId,r.callAPI("flickr.favorites.add",i).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-favorites-add"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-favorites-remove-updater",function(e,t){"use strict";function n(n,r){var i={};return i.photo_id=n.photoId,i.user_id=n.userId,r.callAPI("flickr.favorites.remove",i).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-favorites-remove"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("photo-model-helper",function(e,t){var n=require("lib/flog")(t);e.PhotoModelHelper={updateEngagement:function(t,n){var r=[],i;return e.Lang.isObject(n,!0)&&"isFaved"in n&&(i=n.isFaved.newVal?"flickr-favorites-add":"flickr-favorites-remove",r.push(e.ModelUpdaters[i].run({photoId:t},this.appContext))),e.Promise.all(r)},toggleFave:function(e){var t=this.getValue(e,"faveCount"),n=this.getValue(e,"isFaved"),r=!n,i="photo-engagement-models",s=t+(r?1:-1);this.setValues(e,{isFaved:r,faveCount:s}),this.name!==i&&this.appContext.getModelRegistry(i).then(function(t){t.exists(e)&&t.toggleFave(e)})},addAsFave:function(e){var t=this.getValue(e,"faveCount"),n=this.getValue(e,"isFaved"),r="photo-engagement-models";return n||this.setValues(e,{isFaved:!0,faveCount:t+1}),this.name!==r&&this.appContext.getModelRegistry(r).then(function(t){t.exists(e)&&t.toggleFave(e)}),!n},getLargestSize:function(e,t){return this.getSizeToFit(e,{width:Number.MAX_VALUE,height:Number.MAX_VALUE},t)},getSizeToFit:function(t,r,i){i=i||{};var s=this,o,u=r.width,a=r.height,f=!!i.cropToFit,l=i.includeSquare,c=i.sizes||this.getValue(t,"sizes"),h=i.excludeSizes||["o"],p=i.includeSizes,d,v,m;if(typeof i.includeSizes=="undefined")try{p=Object.keys(c)}catch(g){n.warn("getSizeToFit with invalid sizes",{err:g,sizes:c})}return this._getSizeToFitMemo=this._getSizeToFitMemo||{},o=[t,u,a,f,h.sort().join(""),p.sort().join("")].join("_"),this._getSizeToFitMemo[o]||(e.Object.each(c,function(e,n){var r,i,s,o,c,g;if(e&&h.indexOf(n)===-1&&p.indexOf(n)>-1)if(l||!this.isSizeSquare(n)||this.isPhotoSquare(t)){r=parseInt(e.width,10),i=parseInt(e.height,10),f&&r>=u&&i>=a?s=!0:!f&&(r>=u||i>=a)&&(s=!0),s&&(d?(o=parseInt(d.height,10),i<o&&(d=e)):d=e);if(v){c=parseInt(v.width,10),g=parseInt(v.height,10);if(r>c||i>g)v=e}else v=e}m=d||v},this),this._getSizeToFitMemo[o]=m,this._getSizeToFitMemoTimer||(this._getSizeToFitMemoTimer=setTimeout(function(){delete s._getSizeToFitMemo,delete s._getSizeToFitMemoTimer},1e4))),e.clone(this._getSizeToFitMemo[o],!0)},getSizeIfExact:function(e,t){var n=this.getValue(e,"sizes"),r,i;return Object.keys(n).some(function(e){return e==="o"?!1:(i=n[e],t.height===i.height&&t.width===i.width?(r=i,!0):!1)}),r},isSizeSquare:function(e){var t={sq:"sq",q:"q"};return!!t[e]},isPhotoSquare:function(t){var n;return this._isPhotoSquareMemo=this._isPhotoSquareMemo||{},typeof this._isPhotoSquareMemo[t]!="undefined"?n=this._isPhotoSquareMemo[t]:(n=!0,e.Object.some(this.getValue(t,"sizes"),function(e,t){var r;if(e&&e.width&&e.height&&!this.isSizeSquare(t)){r=parseInt(e.width,10)/parseInt(e.height,10);if(r!==1)return n=!1,!0}},this),this._isPhotoSquareMemo[t]=n),n},getSizeForCanvas:function(e,t,n,r){r=r||1;var i=this.getSizeToFit(e,{width:t*r,height:n*r}),s,o;return s=Math.min(n/r,i.height),o=Math.min(t/r,i.width/i.height*s),s=Math.min(s,i.height/i.width*o),{width:Math.round(o),height:Math.round(s),url:i.url,pixelRatio:i.width/o}},attributes:{title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},description:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},mediaType:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:"photo"},license:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},isVideo:{readOnly:!0,derivedBy:["mediaType"],getter:function(e,t){var n=this.getValue(t,"mediaType");return n==="video"}},isOwner:{readOnly:!0,derivedBy:["owner"],getter:function(e,t){var n=this.getValue(t,"owner"),r=this.appContext.getViewer();return!!r.signedIn&&n.getValue("id")===r.nsid}},sizes:{},descendingSizes:{readOnly:!0,derivedBy:["sizes"],defaultFn:function(e){var t,n,r=[];this._descendingSizesMemo=this._descendingSizesMemo||{};if(this._descendingSizesMemo[e])return this._descendingSizesMemo[e];t=this.getValue(e,"sizes");for(n in t)r.push(t[n]),r[r.length-1].key=n;return r.sort(function(e,t){return e.width<t.width?1:e.width===t.width?e.height<t.height?1:e.height===t.height?e.key==="o"?-1:1:-1:-1}),this._descendingSizesMemo[e]=r,r}},ascendingSizes:{readOnly:!0,derivedBy:["descendingSizes"],defaultFn:function(e){return this.getValue(e,"descendingSizes").reverse()}},aspectRatio:{readOnly:!0,derivedBy:["descendingSizes","rotation"],defaultFn:function(e){var t=this.getValue(e,"descendingSizes")[0];return t.key==="o"&&this.getValue(e,"rotation")%180!==0?t.height/t.width:t.width/t.height}},needsInterstitial:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},canComment:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},canPublicComment:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/"+e:undefined}},rotation:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},ownerNsid:{},isFaved:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},faveCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},commentCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},canFave:{readOnly:!0
,derivedBy:["is_owner"],getter:function(e,t){return!this.getValue(t,"isOwner")}},is3MP:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},ownerCountryApproved:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},ownerFollowedByCurators:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},ownerAdded:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},ownerPassedOver:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},statusColor:{defaultValue:""},isMarketplaceLicensable:{defaultFn:function(e){return!1}},marketplaceLicensingUrl:{setter:function(e){return e&&e.indexOf("http")<0&&(e="http://"+e),e},defaultFn:function(e){return""}}}}},"@VERSION@",{requires:["flickr-favorites-add-updater","flickr-favorites-remove-updater"]});
YUI.add("flickr-licensing-curation-passOverUser-updater",function(e,t){"use strict";function n(n,r){return r.callAPI("flickr.licensing.curation.passOverUser",n).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-licensing-curation-passOverUser"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
